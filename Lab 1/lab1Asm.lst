


ARM Macro Assembler    Page 1 


    1 00000000                 AREA             Lab1Asm, CODE, READONLY
    2 00000000         
    3 00000000                 EXPORT           encryptionAsm
    4 00000000                 EXPORT           decryptionAsm
    5 00000000         ; Lab 1, Assembly encryption/decryption routines
    6 00000000         ; REGISTERS
    7 00000000         ; R0: Pointer to key -> D0
    8 00000000         ; R1: Pointer to data -> D1
    9 00000000         ; R2: Delta
   10 00000000         ; R3: Sum
   11 00000000         ; R4: Loop counter (N)
   12 00000000         ; R5: Temp
   13 00000000         ; R6-R8: T0-T3
   14 00000000         ; R9-R12: K0-K3
   15 00000000         
   16 00000000         encryptionAsm
   17 00000000         
   18 00000000 B401            PUSH             {R0}        ; Put key pointer o
                                                            n stack
   19 00000002 B402            PUSH             {R1}        ; Put data pointer 
                                                            on stack
   20 00000004 B404            PUSH             {R2}        ; Put delta on stac
                                                            k
   21 00000006         
   22 00000006 460D            MOV              R5, R1      ; Copy data pointer
                                                             to temp register
   23 00000008         
   24 00000008 E890 1E00       LDM              R0, {R9 - R12} ; Load key into 
                                                            registers 9 - 12
   25 0000000C         
   26 0000000C E895 0003       LDM              R5, {R0 - R1} ; Load data into 
                                                            R0 and R1
   27 00000010         
   28 00000010 F04F 0400       MOV              R4, #0      ; Set loop counter 
                                                            to 0
   29 00000014         
   30 00000014 F04F 3047       MOV              R0, #0x47474747
   31 00000018 F04F 3149       MOV              R1, #0x49494949
   32 0000001C         
   33 0000001C C503            STM              R5!, {R0 - R1} ; Put data back 
                                                            in memory
   34 0000001E         ;STR R0, [R5, #0]!
   35 0000001E         
   36 0000001E BC04            POP              {R2}
   37 00000020 BC02            POP              {R1}
   38 00000022 BC01            POP              {R0}
   39 00000024         ; Increment stack pointer by 3 registers
   40 00000024         
   41 00000024 4770            BX               LR
   42 00000026         
   43 00000026                 ENDP
   44 00000026         
   45 00000026         decryptionAsm
   46 00000026         
   47 00000026                 END
Command Line: --debug --xref --cpu=Cortex-M4.fp --apcs=interwork --depend=lab1A
sm.d -olab1Asm.o -IC:\Keil\ARM\RV31\INC -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\A
RM\Inc\ST\STM32F4xx --list=lab1Asm.lst lab1Asm.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

Lab1Asm 00000000

Symbol: Lab1Asm
   Definitions
      At line 1 in file lab1Asm.s
   Uses
      None
Comment: Lab1Asm unused
decryptionAsm 00000026

Symbol: decryptionAsm
   Definitions
      At line 45 in file lab1Asm.s
   Uses
      At line 4 in file lab1Asm.s
Comment: decryptionAsm used once
encryptionAsm 00000000

Symbol: encryptionAsm
   Definitions
      At line 16 in file lab1Asm.s
   Uses
      At line 3 in file lab1Asm.s
Comment: encryptionAsm used once
3 symbols
334 symbols in table
