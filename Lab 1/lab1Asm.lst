


ARM Macro Assembler    Page 1 


    1 00000000                 AREA             Lab1Asm, CODE, READONLY
    2 00000000         
    3 00000000                 EXPORT           encryptionAsm
    4 00000000                 EXPORT           decryptionAsm
    5 00000000         ; Lab 1, Assembly encryption/decryption routines
    6 00000000         ; REGISTERS
    7 00000000         ; R0: Pointer to key -> D0
    8 00000000         ; R1: Pointer to data -> D1
    9 00000000         ; R2: Delta
   10 00000000         ; R3: Sum
   11 00000000         ; R4: Loop counter (N)
   12 00000000         ; R5: Temp
   13 00000000         ; R6-R8: T0-T3
   14 00000000         ; R9-R12: K0-K3
   15 00000000         
   16 00000000         encryptionAsm
   17 00000000         
   18 00000000 B401            PUSH             {R0}        ; Put key pointer o
                                                            n stack
   19 00000002 B402            PUSH             {R1}        ; Put data pointer 
                                                            on stack
   20 00000004 B404            PUSH             {R2}        ; Put delta on stac
                                                            k
   21 00000006         
   22 00000006 460D            MOV              R5, R1      ; Copy data pointer
                                                             to temp register
   23 00000008         
   24 00000008 E890 1E00       LDM              R0, {R9 - R12} ; Load key into 
                                                            registers 9 - 12
   25 0000000C         
   26 0000000C E895 0003       LDM              R5, {R0 - R1} ; Load data into 
                                                            R0 and R1
   27 00000010         
   28 00000010 F04F 0400       MOV              R4, #0      ; Set loop counter 
                                                            to 0
   29 00000014         
   30 00000014 F04F 0000       MOV              R0, #0
   31 00000018 F04F 0100       MOV              R1, #0
   32 0000001C         
   33 0000001C         ; BEGIN LOOP
   34 0000001C         Loop
   35 0000001C 2C20            CMP              R4, #32     ; Compare loop coun
                                                            ter and 32
   36 0000001E D006            BEQ              EndLoop     ; if equal, loop is
                                                             done, exit
   37 00000020         
   38 00000020         ; Logic here
   39 00000020         ; Dummy logic:
   40 00000020 F100 0001       ADD              R0, R0, #1
   41 00000024 F101 0101       ADD              R1, R1, #1
   42 00000028         
   43 00000028         
   44 00000028 F104 0401       ADD              R4, R4, #1  ; increment counter
                                                            
   45 0000002C E7F6            B                Loop
   46 0000002E         EndLoop
   47 0000002E         ; AFTER LOOP
   48 0000002E C503            STM              R5!, {R0 - R1} ; Put data back 
                                                            in memory



ARM Macro Assembler    Page 2 


   49 00000030         
   50 00000030 BC04            POP              {R2}
   51 00000032 BC02            POP              {R1}
   52 00000034 BC01            POP              {R0}
   53 00000036         ; Increment stack pointer by 3 registers
   54 00000036         
   55 00000036 4770            BX               LR
   56 00000038         
   57 00000038                 ENDP
   58 00000038         
   59 00000038         decryptionAsm
   60 00000038         
   61 00000038                 END
Command Line: --debug --xref --cpu=Cortex-M4.fp --apcs=interwork --depend=lab1A
sm.d -olab1Asm.o -IC:\Keil\ARM\RV31\INC -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\A
RM\Inc\ST\STM32F4xx --list=lab1Asm.lst lab1Asm.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

EndLoop 0000002E

Symbol: EndLoop
   Definitions
      At line 46 in file lab1Asm.s
   Uses
      At line 36 in file lab1Asm.s
Comment: EndLoop used once
Lab1Asm 00000000

Symbol: Lab1Asm
   Definitions
      At line 1 in file lab1Asm.s
   Uses
      None
Comment: Lab1Asm unused
Loop 0000001C

Symbol: Loop
   Definitions
      At line 34 in file lab1Asm.s
   Uses
      At line 45 in file lab1Asm.s
Comment: Loop used once
decryptionAsm 00000038

Symbol: decryptionAsm
   Definitions
      At line 59 in file lab1Asm.s
   Uses
      At line 4 in file lab1Asm.s
Comment: decryptionAsm used once
encryptionAsm 00000000

Symbol: encryptionAsm
   Definitions
      At line 16 in file lab1Asm.s
   Uses
      At line 3 in file lab1Asm.s
Comment: encryptionAsm used once
5 symbols
336 symbols in table
